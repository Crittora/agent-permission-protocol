{% extends "base.html" %}

{% block content %}
  <div class="app-header">
    <div class="app-header__title">{{ config.site_name }}</div>
    {% if config.extra.app_version %}
      <div class="app-header__version">{{ config.extra.app_version }}</div>
    {% endif %}
  </div>
  {{ super() }}
{% endblock %}

{% block scripts %}
  {{ super() }}
  {% set page_url = page.canonical_url or (config.site_url ~ '/' ~ page.url) %}
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "@id": "{{ page_url }}#webpage",
      "name": "{{ page.title }}",
      "url": "{{ page_url }}",
      "description": "{{ page.meta.description or config.site_description }}",
      "isPartOf": {
        "@id": "{{ config.extra.site_url }}#website"
      },
      "publisher": {
        "@id": "{{ config.extra.org_url }}#organization"
      }
    }
  </script>
  {% if page and page.url == "faq/" %}
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "What is the Agent Permission Protocol (APP)?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "The Agent Permission Protocol (APP) is a protocol that requires explicit, cryptographically verifiable permission policies to gate agent execution at runtime."
            }
          },
          {
            "@type": "Question",
            "name": "What is execution-time authority?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Execution-time authority is authorization that is validated immediately before an agent action occurs. Under APP, no action is permitted unless a valid permission policy is verified at execution."
            }
          },
          {
            "@type": "Question",
            "name": "What is ambient authority in agentic systems?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Ambient authority occurs when agents inherit permissions implicitly through tool availability or credentials rather than explicit authorization. APP eliminates ambient authority by requiring sealed permission policies."
            }
          }
        ]
      }
    </script>
  {% endif %}
{% endblock %}
